<div>
  <div (click)="goToDetail()" class="relative shadow">
    <div
      class="relative w-full bg-gray-100 flex items-center justify-center overflow-hidden rounded-t-lg"
    >
      <img
        *ngIf="product.image_url"
        [src]="product.image_url"
        alt="{{ product.name }}"
        class="object-cover w-full h-full"
      />
      <div *ngIf="!product.image_url" class="text-gray-400 text-lg">No Image</div>
      <button
        class="absolute top-2 w-10 h-10 flex items-center justify-center right-2 z-10 bg-white/90 rounded-full p-2 shadow-md hover:scale-110 transition"
        (click)="toggleWishlist($event)"
      >
        <span
          class="text-2xl"
          [ngClass]="{
            'text-red-500 wobbly-burst': isInWishlist$ | async,
            'text-gray-400 hover:text-red-500': !(isInWishlist$ | async),
          }"
        >
          {{ (isInWishlist$ | async) ? '‚ù§Ô∏è' : 'ü§ç' }}
        </span>
      </button>
    </div>

    <!-- Content -->
    <div class="p-4 flex flex-col gap-2 flex-1">
      <!-- Title & Price -->
      <div class="flex justify-between items-center">
        <h3 class="text-base font-semibold line-clamp-2">{{ product.name }}</h3>
      </div>

      <!-- Owner & Created date -->
      <div>
        <p class="text-sm text-gray-500">Prix: {{ product.price | currency: 'EUR' }}</p>
      </div>
      <div>
        <p class="text-sm text-gray-500">Owner: {{ product.owner_id }}</p>
      </div>
      <div>
        <p class="text-sm text-gray-500">Created: {{ product.created_at | date: 'short' }}</p>
      </div>

      <!-- Rating -->
      <div class="flex items-center gap-2 mt-2">
        <mat-chip color="primary" selected>
          Avg Rating: {{ avgRating !== 'N/A' ? avgRating : 'No ratings' }}
        </mat-chip>

        <span *ngIf="avgRating !== 'N/A'" class="text-yellow-400 text-lg">
          <ng-container *ngFor="let star of starsArray">
            {{ star }}
          </ng-container>
        </span>
      </div>
    </div>
  </div>
</div>
